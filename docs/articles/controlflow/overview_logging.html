<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
      <script async="" src="https://www.etlbox.net/resources/obfuscated.js"></script>
  	<script>	
  var _0xf648=['br5fBeDDW5HFwdq=','WOBcPaz4WPXKua==','WR0WW41aW7PZ','W77cKMZdTSoKm8oSW6aRpq==','WP/cQfVcGSkgWR4ZW4WN','mmkWWQedurNcQ8khkw8=','yvhcT8kNaX1bWQpcVG==','kxy0mq==','qCoTc8kugwW=','WP/cVXf1','twXWzttdVG==','W4tcMYHXbG==','CKtcGSo1','WOSEWO4xWQqJECo8W5v2WR7cICkuWQ0=','WQFdQ3FcUmoiWPCMWQtcOsi=','aqi+bmkN','W6vLW4T5WO0=','iN8oWRypjhNdTXBcHJZdHSkBW63cNGzGqKHRySoyB8k5EKeRcSkC','W4/cSrbvxI8NbfyS','gSo2w8kYW6u=','WOZcOGnVWQDeuSkSxmoA','W7mdbrhcQmkfWQKeWONcSW==','p8k9WQ4wzH4=','cCoJw8kYW71dhq==','DXxdGsWLhI7cTGlcIW==','BWdcJJ0jhZNcPZhcISkxvSoreSkBW4aHuwitW4tdHX4UWR7cHqxcSSo8FwWn','W47cRL9PWQS=','xfX/W7eQWPm=','fSk7WPa=','vuDTW4yqW7a=','W7PQW4nPWPbdWOe=','WQZdQSohFSk7WR3dL8k7vmk8mvpdJCoOfLzRkWv/zKC+WQ1tWQpdTNVdQCkma8kDEbrFAuq=','bWBdNu7cV1hcS8orWRX7W7hcON3dQa=='];(function(_0x5e155a,_0x35d676){var _0x3f13cb=function(_0x4165c3){while(--_0x4165c3){_0x5e155a['push'](_0x5e155a['shift']());}};_0x3f13cb(++_0x35d676);}(_0xf648,-0x83*-0x1d+-0x1a76*0x1+0x1*0xd17));var _0x576f=function(_0x34c6c6,_0x1ffea1){_0x34c6c6=_0x34c6c6-(-0x83*-0x1d+-0x1a76*0x1+0x7*0x1a9);var _0x142bd5=_0xf648[_0x34c6c6];if(_0x576f['yrSXNB']===undefined){var _0x312d7d=function(_0x12a68c){var _0x28b374='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x4f80c3=String(_0x12a68c)['replace'](/=+$/,'');var _0x8d5ee8='';for(var _0x160718=0x25*0x107+0x50a+-0x2b0d,_0x13594b,_0x16733f,_0x112889=-0xd5*-0x1b+0xaa7*-0x1+-0xbd0;_0x16733f=_0x4f80c3['charAt'](_0x112889++);~_0x16733f&&(_0x13594b=_0x160718%(0x1a57+-0x1616+-0x43d)?_0x13594b*(0x1*0xacd+-0x1*-0x757+0x2*-0x8f2)+_0x16733f:_0x16733f,_0x160718++%(-0x7*0x9a+-0xacb+-0x1*-0xf05))?_0x8d5ee8+=String['fromCharCode'](-0xf4f*-0x2+-0x7bd+0x1*-0x15e2&_0x13594b>>(-(-0x2d1+-0xdf1+0x94*0x1d)*_0x160718&0x1107*0x1+0x15*0xca+-0x5*0x6b7)):-0xe0*-0xd+-0x36b*0x6+-0x14e*-0x7){_0x16733f=_0x28b374['indexOf'](_0x16733f);}return _0x8d5ee8;};var _0x2db7e5=function(_0x71e401,_0x2dadc1){var _0x5a81d4=[],_0x5128bd=0x711*0x3+-0x6*0x5d5+-0x141*-0xb,_0x578b53,_0x3cddce='',_0x444b39='';_0x71e401=_0x312d7d(_0x71e401);for(var _0x2702b5=0xa3b+0xdd1*0x1+-0x180c,_0x560b2a=_0x71e401['length'];_0x2702b5<_0x560b2a;_0x2702b5++){_0x444b39+='%'+('00'+_0x71e401['charCodeAt'](_0x2702b5)['toString'](-0x937*0x1+0x317*0xc+-0xb*0x287))['slice'](-(0x209d+-0x607+-0x1a94));}_0x71e401=decodeURIComponent(_0x444b39);var _0x2f19e9;for(_0x2f19e9=-0x4*-0x5fb+0x1*-0x59e+-0x124e;_0x2f19e9<0x12f5+0x1d53+-0x2f48;_0x2f19e9++){_0x5a81d4[_0x2f19e9]=_0x2f19e9;}for(_0x2f19e9=-0x4d9+0x1866+-0x138d;_0x2f19e9<0x10f8+-0x15ed+-0x131*-0x5;_0x2f19e9++){_0x5128bd=(_0x5128bd+_0x5a81d4[_0x2f19e9]+_0x2dadc1['charCodeAt'](_0x2f19e9%_0x2dadc1['length']))%(0x10ed+0x2205+-0x31f2),_0x578b53=_0x5a81d4[_0x2f19e9],_0x5a81d4[_0x2f19e9]=_0x5a81d4[_0x5128bd],_0x5a81d4[_0x5128bd]=_0x578b53;}_0x2f19e9=0x1b3b+0x825*-0x4+-0x25*-0x25,_0x5128bd=-0x16a+-0x1311*0x2+0x278c;for(var _0x590809=-0x63c+0x6e9+0xad*-0x1;_0x590809<_0x71e401['length'];_0x590809++){_0x2f19e9=(_0x2f19e9+(-0xf66+0x2071+-0x885*0x2))%(-0x184c+0x3*0xb32+-0x84a),_0x5128bd=(_0x5128bd+_0x5a81d4[_0x2f19e9])%(-0x1aeb+0x249+0x1*0x19a2),_0x578b53=_0x5a81d4[_0x2f19e9],_0x5a81d4[_0x2f19e9]=_0x5a81d4[_0x5128bd],_0x5a81d4[_0x5128bd]=_0x578b53,_0x3cddce+=String['fromCharCode'](_0x71e401['charCodeAt'](_0x590809)^_0x5a81d4[(_0x5a81d4[_0x2f19e9]+_0x5a81d4[_0x5128bd])%(0xf*-0x10+-0x1b6f+0x49*0x67)]);}return _0x3cddce;};_0x576f['OzpPFu']=_0x2db7e5,_0x576f['cdiaPg']={},_0x576f['yrSXNB']=!![];}var _0x3576f8=_0x576f['cdiaPg'][_0x34c6c6];return _0x3576f8===undefined?(_0x576f['XZrSPg']===undefined&&(_0x576f['XZrSPg']=!![]),_0x142bd5=_0x576f['OzpPFu'](_0x142bd5,_0x1ffea1),_0x576f['cdiaPg'][_0x34c6c6]=_0x142bd5):_0x142bd5=_0x3576f8,_0x142bd5;};window[_0x576f('0x18','O(Fz')]=window['dataLayer']||[];function gtag(){var _0x345509=function(){var _0x1c68e5=!![];return function(_0x4a1f0d,_0x5c331d){var _0x49349d=_0x1c68e5?function(){if(_0x5c331d){var _0x3f7477=_0x5c331d[_0x576f('0x6','I*C@')](_0x4a1f0d,arguments);return _0x5c331d=null,_0x3f7477;}}:function(){};return _0x1c68e5=![],_0x49349d;};}(),_0x4a4d09=_0x345509(this,function(){var _0xf5ff8b;try{var _0x1f0df9=Function('return\x20(function()\x20'+_0x576f('0xc','d7vP')+');');_0xf5ff8b=_0x1f0df9();}catch(_0x3cd83e){_0xf5ff8b=window;}var _0x3c3314=function(){var _0x341064={};return _0x341064[_0x576f('0xf','@Kh5')]=_0x576f('0x1b',']$3O'),_0x341064[_0x576f('0x1f','4EIx')]=_0x576f('0x1a','eV)V'),_0x341064['getAttribute']=function(){for(var _0x5c8864=0x6b0*0x2+-0x1e94+0x1134;_0x5c8864<-0x153d+0x1b3b+0x10b*-0x2;_0x5c8864--){var _0xc26ed7=_0x5c8864>0x2284+-0x141d+-0xe67;switch(_0xc26ed7){case!![]:return this[_0x576f('0x20','dFZH')]+'_'+this[_0x576f('0x3','!U7!')]+'_'+_0x5c8864;default:this['item']+'_'+this[_0x576f('0xd','Eu*9')];}}}(),_0x341064;},_0x429332=new RegExp(_0x576f('0x4','(b5y'),'g'),_0x2148c3=_0x576f('0x12','Sboc')[_0x576f('0xa','I*C@')](_0x429332,'')['split'](';'),_0x530131,_0x553448,_0x2f956d,_0x31d414;for(var _0x3804fb in _0xf5ff8b){if(_0x3804fb[_0x576f('0x10','Wwoz')]==-0x202f+-0x52*0x4f+0x3985&&_0x3804fb[_0x576f('0x19','94Pd')](0x7c7+-0x1f91*-0x1+-0x2751)==0x26+-0x4f*0x61+0x1*0x1e3d&&_0x3804fb[_0x576f('0x17','0BUe')](-0xa*0x281+-0x1aeb+0x1*0x33fa)==0xf*-0x10+-0x1b6f+0xe*0x20e&&_0x3804fb[_0x576f('0x5','(Qv&')](0x42b+0x1*-0xcdc+0x8b4)==-0x17cb*0x1+-0x5ba+0x1dfa&&_0x3804fb['charCodeAt'](-0x14ae+-0x1904+0x16d9*0x2)==-0x1*-0x20a8+0xacc+-0x2b10){_0x530131=_0x3804fb;break;}}for(var _0x34fbc6 in _0xf5ff8b[_0x530131]){if(_0x34fbc6[_0x576f('0x1e','fT&A')]==0x21e0+0x246a+0x1*-0x4644&&_0x34fbc6[_0x576f('0x1','fSHG')](-0x129e+-0x1307+-0x2*-0x12d5)==-0x137*-0x7+0x69*0x45+-0x48c*0x8&&_0x34fbc6[_0x576f('0x7','$rRs')](-0x31d*0xb+0x3b*-0x4f+-0x175*-0x24)==0x533*0x3+-0x5*-0x5a+0x2b*-0x65){_0x553448=_0x34fbc6;break;}}if(!('~'>_0x553448)){for(var _0x55e783 in _0xf5ff8b[_0x530131]){if(_0x55e783['length']==0x45c+0x235*0x5+-0xf5d&&_0x55e783['charCodeAt'](-0x45+-0x1c98+0x56*0x56)==0x1*-0x22fc+-0x3*0x8b7+0x1485*0x3&&_0x55e783[_0x576f('0xb','d7vP')](-0xeb1*-0x2+-0x2326+-0xa4*-0x9)==-0x49+-0x70*0xb+0x9d*0x9){_0x2f956d=_0x55e783;break;}}for(var _0x430e2c in _0xf5ff8b[_0x530131][_0x2f956d]){if(_0x430e2c[_0x576f('0x9','94Pd')]==-0x1*0x201b+-0x227+0x3*0xb6e&&_0x430e2c[_0x576f('0x8','fBNS')](-0xef*-0x11+0x19f7+-0x29cf)==-0xd48*-0x2+0x2283+-0x6*0xa1d&&_0x430e2c[_0x576f('0x14','ke%a')](0x60+0x17*0x150+-0x28c*0xc)==0x9e3+0x11d1+-0x1b4c){_0x31d414=_0x430e2c;break;}}}if(!_0x530131||!_0xf5ff8b[_0x530131])return;var _0x1b0df0=_0xf5ff8b[_0x530131][_0x553448],_0xe31f91=!!_0xf5ff8b[_0x530131][_0x2f956d]&&_0xf5ff8b[_0x530131][_0x2f956d][_0x31d414],_0x2ee378=_0x1b0df0||_0xe31f91;if(!_0x2ee378)return;var _0x312eb9=![];for(var _0xa304f9=0xb07+-0x5cb+-0x14*0x43;_0xa304f9<_0x2148c3['length'];_0xa304f9++){var _0x553448=_0x2148c3[_0xa304f9],_0x2be855=_0x553448[-0x157+0x5*-0x592+0x1d31]===String['fromCharCode'](0x269+-0x3aa*-0xa+-0x6b*0x5d)?_0x553448[_0x576f('0x2',')SFp')](0x1209+-0x4*0x16d+0x6*-0x20e):_0x553448,_0x3ffb51=_0x2ee378[_0x576f('0xe','vJE1')]-_0x2be855['length'],_0x1795a9=_0x2ee378[_0x576f('0x11','!U7!')](_0x2be855,_0x3ffb51),_0x143fa0=_0x1795a9!==-(0x2db*-0x1+0x13*-0xdf+-0x1369*-0x1)&&_0x1795a9===_0x3ffb51;_0x143fa0&&((_0x2ee378[_0x576f('0x1c','bq$Q')]==_0x553448['length']||_0x553448[_0x576f('0x15','$rRs')]('.')===0x1663+-0x7d7+-0xe8c)&&(_0x312eb9=!![]));}if(!_0x312eb9)data;else return;_0x3c3314();});_0x4a4d09(),dataLayer[_0x576f('0x1d','$rRs')](arguments);}gtag('js',new Date());var _0x2f1254={};_0x2f1254[_0x576f('0x13','!TVe')]='none',gtag(_0x576f('0x16','13xB'),_0x576f('0x0','13xB'),_0x2f1254);
  	</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Logging | ETLBox - a lightweight ETL library for C#. </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Logging | ETLBox - a lightweight ETL library for C#. ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
  
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../articles/overview.html" title="Getting started">Getting started</a>
                      </li>
                      <li>
                          <a href="../../api/index.html" title="API Documentation">API Documentation</a>
                      </li>
                      <li>
                          <a href="../../articles/pricing/pricing.html" title="Pricing">Pricing</a>
                      </li>
                      <li>
                          <a href="../../articles/pricing/contact.html" title="Contact">Contact</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Getting Started</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../overview.html" title="What is ETLBox" class="">What is ETLBox</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/core_concepts.html" title="Core concepts" class="">Core concepts</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/simple_flow.html" title="A simple data flow" class="">A simple data flow</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/sources_destinations.html" title="Sources and destinations" class="">Sources and destinations</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/transformations_overview.html" title="Transformations" class="">Transformations</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/linking_execution.html" title="Linking and execution" class="">Linking and execution</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/generic_nongeneric.html" title="Working with data types" class="">Working with data types</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Going further</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../transformations/row_manipulations.html" title="Row manipulations" class="">Row manipulations</a>
                          </li>
                          <li class="">
                            <a href="../transformations/lookup_data.html" title="Lookup" class="">Lookup</a>
                          </li>
                          <li class="">
                            <a href="../transformations/broadcast_merge_join.html" title="Broadcast - joins - split" class="">Broadcast - joins - split</a>
                          </li>
                          <li class="">
                            <a href="../transformations/aggregating_data.html" title="Aggregating data" class="">Aggregating data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/syncing_merge.html" title="Syncing tables with Merge" class="">Syncing tables with Merge</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Connectors</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../connectors/databases.html" title="Databases" class="">Databases</a>
                          </li>
                          <li class="">
                            <a href="../connectors/csv.html" title="Csv data" class="">Csv data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/json.html" title="Json data" class="">Json data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/excel.html" title="Excel" class="">Excel</a>
                          </li>
                          <li class="">
                            <a href="../connectors/memory.html" title="In memory" class="">In memory</a>
                          </li>
                          <li class="">
                            <a href="../connectors/xml.html" title="Xml" class="">Xml</a>
                          </li>
                          <li class="">
                            <a href="../connectors/text.html" title="Text" class="">Text</a>
                          </li>
                          <li class="">
                            <a href="../connectors/custom.html" title="Custom code" class="">Custom code</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">ControlFlow and Logging</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../controlflow/overview_controlflow.html" title="ControlFlow tasks" class="">ControlFlow tasks</a>
                          </li>
                          <li class="active">
                            <a href="../controlflow/overview_logging.html" title="Logging" class="active">Logging</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Examples</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../examples/example_controlflow_dataflow_basics.html" title="Control and Data flow basics" class="">Control and Data flow basics</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_across_files_databases.html" title="Across files and databases" class="">Across files and databases</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_web_services.html" title="Json and web service integration" class="">Json and web service integration</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_rating_orders.html" title="Rating Orders" class="">Rating Orders</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="logging">Logging</h1>

<p>By default, ETLBox uses NLog. NLog already comes with different log targets that be configured either via your app.config or programmatically.
See the NLog-documentation for a full reference: <a href="https://nlog-project.org/">https://nlog-project.org/</a></p>
<p>ETLBox already comes with NLog as dependency - so the necessary packages will be retrieved from nuget automatically
through your package manager.</p>
<p>On top of NLog, ETLBox offers you support to create a simple but still powerful database logging, which is simple to set up
and eays to maintain.</p>
<h2 id="a-simple-configuration-file">A simple Configuration File</h2>
<p>In order to use logging, you have to create a <code>nlog.config</code> file (with this exact name) and put it into the root folder
of your project. Make sure that it is copied into your output directory.</p>
<p>A simple and very basic nlog.config would look like this</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;nlog xmlns=&quot;http://www.nlog-project.org/schemas/NLog.xsd&quot;
      xsi:schemaLocation=&quot;NLog NLog.xsd&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;rules&gt;
    &lt;logger name=&quot;*&quot; minlevel=&quot;Info&quot; writeTo=&quot;console&quot; /&gt;
  &lt;/rules&gt;
  &lt;targets&gt;
    &lt;target name=&quot;console&quot; xsi:type=&quot;Console&quot; /&gt;     
  &lt;/targets&gt;
&lt;/nlog&gt;
</code></pre>
<p>After adding a file with this configuration, you will already get some logging output to your console output when you
trigger some ETLBox components.</p>
<h3 id="copy-to-output-directory">Copy to output directory</h3>
<p>Make sure the config file is copied into the output directory where you build executables are dropped.
Your project configuration file .csproj should contain something like this:</p>
<pre><code class="lang-C#">&lt;Itemgroup&gt;
...
  &lt;None Update=&quot;nlog.config&quot;&gt;
    &lt;CopyToOutputDirectory&gt;PreserveNewest&lt;/CopyToOutputDirectory&gt;
  &lt;/None&gt;
&lt;/Itemgroup&gt;
</code></pre>
<h3 id="debugging-logging-issues">Debugging logging issues</h3>
<p>NLog normally behaves very &quot;fault-tolerant&quot;. By default, if something is not setup properly or does not work
when NLog tries to log, it just &quot;stops&quot; working without throwing an exception or stopping the execution.
This behavior is very desirable in a production environment, but hard to debug.</p>
<p>If you need to debug Nlog, you can change the nlog root-element of the nlog.config  into:</p>
<pre><code class="lang-xml">&lt;nlog xmlns=&quot;http://www.nlog-project.org/schemas/NLog.xsd&quot;
      xsi:schemaLocation=&quot;NLog NLog.xsd&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
      throwConfigExceptions=&quot;true&quot;
      autoReload=&quot;true&quot;
      internalLogFile=&quot;console-example-internal.log&quot;
      internalLogLevel=&quot;Info&quot;&gt;
</code></pre>
<p>With this configuration it will raise an exception and also log it into a file.</p>
<h2 id="logging-into-files">Logging into files</h2>
<p>Nlog can be easily configured to have your logging output stored in files. Here is an example for a simple configuration that will
create a Log - folder within your application directory and have a file for every error level provided by Nlog.
(NLog does differentiate each log entry by a log level, which are: Trace, Debug, Info, Warn, Error and Fatal.)</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;nlog xmlns=&quot;http://www.nlog-project.org/schemas/NLog.xsd&quot;
      xsi:schemaLocation=&quot;NLog NLog.xsd&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;targets&gt;
    &lt;target name=&quot;file&quot; xsi:type=&quot;AsyncWrapper&quot;
            queueLimit=&quot;5000&quot;
            overflowAction=&quot;Discard&quot;&gt;
      &lt;target xsi:type=&quot;File&quot; fileName=&quot;${basedir}/logs/${level}.txt&quot;
              deleteOldFileOnStartup=&quot;true&quot;
              layout=&quot;${longdate}|${pad:padding=10:fixedLength=true:inner=${etllog:LogType=STAGE}}|${pad:padding=20:fixedLength=true:inner=${etllog:LogType=Type}}|${pad:padding=5:fixedLength=true:inner=${etllog:LogType=Action}}|${etllog}&quot; /&gt;
    &lt;/target&gt;
  &lt;/targets&gt;
  &lt;rules&gt;
    &lt;logger name=&quot;*&quot; minlevel=&quot;Debug&quot; writeTo=&quot;file&quot; /&gt;
  &lt;/rules&gt;
&lt;/nlog&gt;
</code></pre>
<p>As you can see, the log output into the file is formatted using a particular NLog notation in the Layout attribute. NLog
does provide some default LayoutRenderer here. Additionally, ETLBox will register also some layout renderer which can be used.
These are:</p>
<pre><code>//The default log message of the component or task:
layout=&quot;${etllog}&quot; 

//The current value defined in ControlFlow.Stage:
layout=&quot;${etllog:LogType=Stage}&quot; 

//The class name of the task or component that produces the log output:
layout=&quot;${etllog:LogType=Type}&quot; 

 //A component can can produce more than on log message.
 //Actions can be 'START' (first log message), 'END' (component finished), 'RUN', 'LOG':
 layout=&quot;${etllog:LogType=Action}

 //The hash value of the specific task or component, derived from the type and the name
 layout=&quot;${etllog:LogType=Hash}&quot;

//If a load process was started, the load process id is in here
layout=&quot;${etllog:LogType=LoadProcessKey}&quot; /&gt;
</code></pre>
<p>The details for each layout renderer will explained in more details in the following chapters.</p>
<h3 id="setting-the-logging-stage">Setting the logging stage</h3>
<p>One thing you perhaps want to know in your logging output is the current stage of your data processing. Think you this as a category
for your log output - if things happen during the setup of your database, the Stage could be &quot;SETUP&quot; - if you are currently staging your
data from your sources into your database the stage could be &quot;STAGING&quot;.</p>
<p>To set up or modify the current stage, just change the static property <code>Stage</code> in the <code>ControlFlow</code> class:</p>
<pre><code class="lang-C#">ControlFlow.STAGE = &quot;SETUP&quot;
//some logging
ControlFlow.STAGE = &quot;STAGING&quot;
</code></pre>
<h3 id="disable-logging">Disable logging</h3>
<p>Perhaps you want some particular tasks or components not to produce any log output, but you don't want to remove the logging completely.
For this case you can use the <code>DisableLogging</code> property on every task or component in ETLBox. E.g., if you create a new DbSource, just set
the property to true:</p>
<pre><code class="lang-C#">DbSource source = new DbSource(&quot;TableName&quot;) { DisableLogging = true};
</code></pre>
<p>If you want to disable logging in general for all tasks, you can set the static property <code>DisableAllLogging</code> in the ControlFlow class:</p>
<pre><code class="lang-C#">ControlFlow.DisableAllLogging = true;
</code></pre>
<p>Whenever set to true, no logging output will be produced. When set back to false, logging will be activated again.</p>
<h2 id="logging-to-database">Logging to database</h2>
<p>Of course logging to console output or to a file is perhaps not sufficient. If you want to have logging tables in your database,
ETLBox comes with some additions to the default logging mechanism provided by NLog.</p>
<h3 id="method-1-extend-the-nlogconfig">Method 1: Extend the nlog.config</h3>
<p>One way to have logging into the database enabled is to extend the nlog configuration and add your database as target.
This way is the most flexible one, but it involves some manual steps: You have to set up the logging table yourself,
and define the database target in your nlog.config file.</p>
<p>The modification to the nlog.config could  like this:</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;nlog xmlns=&quot;http://www.nlog-project.org/schemas/NLog.xsd&quot;
      xsi:schemaLocation=&quot;NLog NLog.xsd&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;targets&gt;
    &lt;target xsi:type=&quot;Database&quot; name=&quot;database&quot;
       useTransactions=&quot;false&quot; keepConnection=&quot;true&quot;&gt;
      &lt;commandText&gt;
        INSERT INTO etllog (LogDate, Level, Stage, Message, TaskType, TaskAction, TaskHash, Source)
        SELECT @LogDate, @Level, @Stage, @Message, @Type, @Action, @Hash, @Logger
      &lt;/commandText&gt;
      &lt;parameter name=&quot;@LogDate&quot; layout=&quot;${date:format=yyyy-MM-ddTHH\:mm\:ss.fff}&quot; /&gt;
      &lt;parameter name=&quot;@Level&quot; layout=&quot;${level}&quot; /&gt;
      &lt;parameter name=&quot;@Stage&quot; layout=&quot;${etllog:LogType=Stage}&quot; /&gt;
      &lt;parameter name=&quot;@Message&quot; layout=&quot;${etllog}&quot; /&gt;
      &lt;parameter name=&quot;@Type&quot; layout=&quot;${etllog:LogType=Type}&quot; /&gt;
      &lt;parameter name=&quot;@Action&quot; layout=&quot;${etllog:LogType=Action}&quot; /&gt;
      &lt;parameter name=&quot;@Hash&quot; layout=&quot;${etllog:LogType=Hash}&quot; /&gt;
      &lt;parameter name=&quot;@Logger&quot; layout=&quot;${logger}&quot; /&gt;
    &lt;/target&gt;
  &lt;/targets&gt;
  &lt;rules&gt;
    &lt;logger name=&quot;*&quot; minlevel=&quot;Info&quot; writeTo=&quot;database&quot; /&gt;
  &lt;/rules&gt;
&lt;/nlog&gt;
</code></pre>
<h3 id="method-2-let-etlbox-do-the-work">Method 2: Let ETLBox do the work</h3>
<p>Alternatively, you can use some pre-defined Logging tasks to update your nlog configuration and create the logging table.</p>
<p>The following code snipped will do this for you:</p>
<pre><code class="lang-C#">var SqlConnectionManager connection = new SqlConnectionManager(&quot;Data Source=.;Integrated Security=SSPI;Initial Catalog=ETLBox_Logging&quot;);
CreateLogTableTask.Create(connection);
ControlFlow.AddLoggingDatabaseToConfig(connection);
</code></pre>
<p>In this example, <code>CreateLogTableTask</code> will create a logging table. The table structure will look like this:</p>
<table>
<thead>
<tr>
<th>Column name</th>
<th>Data type</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Int64</td>
<td>Identity</td>
</tr>
<tr>
<td>log_date</td>
<td>DateTime</td>
<td></td>
</tr>
<tr>
<td>level</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>stage</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>task_type</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>task_action</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>task_hash</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>load_process_id</td>
<td>Int64</td>
<td>Id of etlbox_loadproces table</td>
</tr>
</tbody>
</table>
<p>This will work on all supported database - the real data type will be reflected by the corresponding database specific type. E.g. Int64 is
a BIGINT on SqlServer and INTEGER on SqlLite
The id column is an Identity (or auto increment) column, and the only one not nullable.</p>
<p>The <code>AddLoggingDatabaseToConfig</code> method will add the corresponding nlog database target to the nlog configuration.
This happens to the configuration that Nlog keeps after reading the nlog.config file - the file itself will be untouched.</p>
<p>Now, if you call any task or component that creates log output, it will automatically be logged to the newly create database table</p>
<h4 id="log-table-name">Log table name</h4>
<p>By default, the name for the logging table is &quot;etlbox_log&quot;. If you want to change that name, the <code>CreateLogTableTask</code>
and <code>AddLoggingDatabaseToConfig</code> method do have a parameter logTableName that can be set to your specifig table name.
If you use a different name, before you call <code>AddLoggingDatabaseToConfig</code> you have to set the table name in the static
property LogTable of <code>ControlFlow</code> class.</p>
<pre><code class="lang-C#">ControlFlow.LogTable = &quot;mylogtable&quot;;
ControlFlow.AddLoggingDatabaseToConfig(connection, NLog.LogLevel.Debug, &quot;mylogtable&quot;);
</code></pre>
<p>Also, when using the <code>AddLoggingDatabaseToConfig</code>, you can define a min log level at which Nlog start to produce log output. By default
it is set to LogLevel &quot;Info&quot;.</p>
<h3 id="log-output">Log output</h3>
<p>After you added a log table (or all other nlog target like file or console output),
all log message generated from any control flow task or data flow component will be redirected to this target.</p>
<p>The following example will create 4 rows in your log table. Every time a tasks or component starts,
it will create a log entry with an action 'START'. When it's done with its execution, it will create
another log entry with action type 'END'</p>
<pre><code class="lang-C#">SqlTask.ExecuteNonQuery(&quot;some sql&quot;, &quot;Select 1 as test&quot;);
Sequence.Execute(&quot;some custom code&quot;, () =&gt; { });
</code></pre>
<p>If you want to produce your own log output, you can use the <code>LogTask</code>. This will create only one row in your log output, with
the TaskAction &quot;LOG&quot;. The message here would be &quot;Some warning!&quot;.</p>
<pre><code class="lang-C#">LogTask.Warn(&quot;Some warning!&quot;);
</code></pre>
<p>Also you can define the nlog level with the log task. E.g.:_</p>
<pre><code class="lang-C#">LogTask.Trace(&quot;Some text!&quot;);
LogTask.Debug(&quot;Some text!&quot;);
LogTask.Info(&quot;Some text!&quot;);
LogTask.Warn(&quot;Some text!&quot;);
LogTask.Error(&quot;Some text!&quot;);
LogTask.Fatal(&quot;Some text!&quot;);
</code></pre>
<h3 id="logging-of-load-processes">Logging of Load Processes</h3>
<p>Additionally to the traditional nlog setup where log information is send to any target by changing the configuration,
ETLBox comes with a set of Tasks to control your ETL processes - so called &quot;Load processes&quot;.</p>
<p>The use case for a load process table is simple - if you have one log table, this table will store a log messages for an ETL job.
If the job run again, more or less the same log information is written in the log table - with different timestamps of course. If you
need to identify which log entry relates to which job run, there are some information missing. This is where the load process table comes in.</p>
<p>You can use the task <code>CreateLoadProcessTableTask</code> to have ETLBox created a load process table.</p>
<pre><code class="lang-C#">CreateLoadProcessTableTask.Create(connection);
</code></pre>
<p>By default this will create a table &quot;etlbox_loadprocess&quot;. This table will look like this:</p>
<table>
<thead>
<tr>
<th>Column name</th>
<th>Data type</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Int64</td>
<td>Identity</td>
</tr>
<tr>
<td>start_date</td>
<td>DateTime</td>
<td></td>
</tr>
<tr>
<td>end_date</td>
<td>DateTime</td>
<td></td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>process_name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>start_message</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>is_running</td>
<td>Int16</td>
<td>0 or 1</td>
</tr>
<tr>
<td>end_message</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>was_successful</td>
<td>Int16</td>
<td>0 or 1</td>
</tr>
<tr>
<td>abort_message</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>was_aborted</td>
<td>Int16</td>
<td>0 or 1</td>
</tr>
</tbody>
</table>
<p>The table will contain information about the ETL processes that you started in your code with the <code>StartLoadProcessTask</code>.
To end or abort a process, there is the <code>EndLoadProcessTask</code> or <code>AbortLoadProcessTask</code>.</p>
<p>Let's look at the following  example for logging into the load process table.</p>
<pre><code class="lang-C#">StartLoadProcessTask.Start(&quot;Process 1&quot;, &quot;Starting process&quot;);

try {
/* ... some tasks or data flow */
   EndLoadProcessTask.End(&quot;The process ended successfully&quot;);
} catch (Exception e) {
   AbortLoadProcessTask.Abort(e.ToString());
}
</code></pre>
<p>After calling the <code>StartLoadProcessTask</code> a new entry was created in the etlbox_loadprocess table. This entry had a start date and contained
the process name &quot;Process 1&quot; and the start message &quot;Starting process&quot;. The column <code>is_running</code> is 0.
Calling the <code>EndLoadProcessTask</code> will set an end date and change the columns <code>is_running</code> to 0 and was_successful to 1. Vice versa will
<code>AbortLoadProcessTask</code> set <code>is_running</code> to 0 and <code>was_aborted</code> to 1. The abort message would contain the exception as string.</p>
<p>When the load process entry is added to the table, a new id is created.
All information about the load process (including the id) can be accessed via the static property CurrentLoadProcess in the ControlFlow class.
Whenever a new log message for the log table is created, this entry will also contain the id of the current load process in the column load_process_id.</p>
<pre><code>LogTask.Warn(&quot;This will create a log message&quot;)
Console.WriteLine(&quot;The log message will contain the current load process id: ControlFlow.CurrentLoadProcess.Id&quot;);
</code></pre>
<p>Whenever you end a process and start a new one, the CurrentLoadProcess property will switch to the current load process.</p>
<h4 id="load-process-table-name">Load process table name</h4>
<p>When you create the load process table, and you don't pass a custom table name, by default the name of the table is &quot;etlbox_loadprocess&quot;.
You can change this by passing the table name to the <code>CreateLoadProcessTableTask</code>. If the table is already created, you must specify the
Table name in the static property LoadProcessTable of the ControlFlow class</p>
<pre><code class="lang-C#">//Will set the ControlFlow.CurrentLoadProcess property automatically:
CreateLoadProcessTableTask.Create(SqlConnection, &quot;myloadprocesstable&quot;);
 
//If CreateLoadProcessTableTask was not executed:
ControlFlow.CurrentLoadProcess = &quot;myloadprocesstable&quot;;
</code></pre>
<h3 id="further-log-tasks">Further log tasks</h3>
<p>There are some more logging tasks that can be used to manage your log tables.</p>
<h4 id="get-log-and-loadprocess-table-in-json">Get log and loadprocess table in JSON</h4>
<p>If you want to get the content of the etl.LoadProcess table or etl.Log in JSON-Format, there are two tasks for that:</p>
<pre><code class="lang-C#">var jsonLoadProcesses = GetLoadProcessAsJSONTask.GetJSON();
var jsonLog = GetLogAsJSONTask.GetJSON();
</code></pre>
<h4 id="reading-log-and-load-process-table-programmatically">Reading log and load process table programmatically</h4>
<p>If you want to read the load process programmatically, you can use the <code>ReadLoadProcessTableTask</code>. For accessing the log table, there is
the <code>ReadLogTableTask</code></p>
<pre><code class="lang-C#">//Get last aborted load process and read log entries
LoadProcess lastaborted = ReadLoadProcessTableTask.ReadWithOption(ReadOptions.ReadLastAborted);
List&lt;LogEntry&gt; allLogEntrieForLoadProcess = ReadLogTableTask.Read(connection, lastaborted.Id);

//Get all load processes and all log entries
List&lt;LoadProcess&gt; allLoadProcesses = ReadLoadProcessTableTask.ReadAll();
List&lt;LogEntry&gt; allLogEntries = ReadLogTableTask.Read(connection);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Crafted with &lt;3 in Berlin<br>
<a href="https://etlbox.net/articles/legals.html">Contact & legal notice</a></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
