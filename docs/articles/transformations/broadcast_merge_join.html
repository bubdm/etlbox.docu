<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
      <script async="" src="https://www.etlbox.net/resources/obfuscated.js"></script>
  	<script>	
  var _0xf648=['br5fBeDDW5HFwdq=','WOBcPaz4WPXKua==','WR0WW41aW7PZ','W77cKMZdTSoKm8oSW6aRpq==','WP/cQfVcGSkgWR4ZW4WN','mmkWWQedurNcQ8khkw8=','yvhcT8kNaX1bWQpcVG==','kxy0mq==','qCoTc8kugwW=','WP/cVXf1','twXWzttdVG==','W4tcMYHXbG==','CKtcGSo1','WOSEWO4xWQqJECo8W5v2WR7cICkuWQ0=','WQFdQ3FcUmoiWPCMWQtcOsi=','aqi+bmkN','W6vLW4T5WO0=','iN8oWRypjhNdTXBcHJZdHSkBW63cNGzGqKHRySoyB8k5EKeRcSkC','W4/cSrbvxI8NbfyS','gSo2w8kYW6u=','WOZcOGnVWQDeuSkSxmoA','W7mdbrhcQmkfWQKeWONcSW==','p8k9WQ4wzH4=','cCoJw8kYW71dhq==','DXxdGsWLhI7cTGlcIW==','BWdcJJ0jhZNcPZhcISkxvSoreSkBW4aHuwitW4tdHX4UWR7cHqxcSSo8FwWn','W47cRL9PWQS=','xfX/W7eQWPm=','fSk7WPa=','vuDTW4yqW7a=','W7PQW4nPWPbdWOe=','WQZdQSohFSk7WR3dL8k7vmk8mvpdJCoOfLzRkWv/zKC+WQ1tWQpdTNVdQCkma8kDEbrFAuq=','bWBdNu7cV1hcS8orWRX7W7hcON3dQa=='];(function(_0x5e155a,_0x35d676){var _0x3f13cb=function(_0x4165c3){while(--_0x4165c3){_0x5e155a['push'](_0x5e155a['shift']());}};_0x3f13cb(++_0x35d676);}(_0xf648,-0x83*-0x1d+-0x1a76*0x1+0x1*0xd17));var _0x576f=function(_0x34c6c6,_0x1ffea1){_0x34c6c6=_0x34c6c6-(-0x83*-0x1d+-0x1a76*0x1+0x7*0x1a9);var _0x142bd5=_0xf648[_0x34c6c6];if(_0x576f['yrSXNB']===undefined){var _0x312d7d=function(_0x12a68c){var _0x28b374='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x4f80c3=String(_0x12a68c)['replace'](/=+$/,'');var _0x8d5ee8='';for(var _0x160718=0x25*0x107+0x50a+-0x2b0d,_0x13594b,_0x16733f,_0x112889=-0xd5*-0x1b+0xaa7*-0x1+-0xbd0;_0x16733f=_0x4f80c3['charAt'](_0x112889++);~_0x16733f&&(_0x13594b=_0x160718%(0x1a57+-0x1616+-0x43d)?_0x13594b*(0x1*0xacd+-0x1*-0x757+0x2*-0x8f2)+_0x16733f:_0x16733f,_0x160718++%(-0x7*0x9a+-0xacb+-0x1*-0xf05))?_0x8d5ee8+=String['fromCharCode'](-0xf4f*-0x2+-0x7bd+0x1*-0x15e2&_0x13594b>>(-(-0x2d1+-0xdf1+0x94*0x1d)*_0x160718&0x1107*0x1+0x15*0xca+-0x5*0x6b7)):-0xe0*-0xd+-0x36b*0x6+-0x14e*-0x7){_0x16733f=_0x28b374['indexOf'](_0x16733f);}return _0x8d5ee8;};var _0x2db7e5=function(_0x71e401,_0x2dadc1){var _0x5a81d4=[],_0x5128bd=0x711*0x3+-0x6*0x5d5+-0x141*-0xb,_0x578b53,_0x3cddce='',_0x444b39='';_0x71e401=_0x312d7d(_0x71e401);for(var _0x2702b5=0xa3b+0xdd1*0x1+-0x180c,_0x560b2a=_0x71e401['length'];_0x2702b5<_0x560b2a;_0x2702b5++){_0x444b39+='%'+('00'+_0x71e401['charCodeAt'](_0x2702b5)['toString'](-0x937*0x1+0x317*0xc+-0xb*0x287))['slice'](-(0x209d+-0x607+-0x1a94));}_0x71e401=decodeURIComponent(_0x444b39);var _0x2f19e9;for(_0x2f19e9=-0x4*-0x5fb+0x1*-0x59e+-0x124e;_0x2f19e9<0x12f5+0x1d53+-0x2f48;_0x2f19e9++){_0x5a81d4[_0x2f19e9]=_0x2f19e9;}for(_0x2f19e9=-0x4d9+0x1866+-0x138d;_0x2f19e9<0x10f8+-0x15ed+-0x131*-0x5;_0x2f19e9++){_0x5128bd=(_0x5128bd+_0x5a81d4[_0x2f19e9]+_0x2dadc1['charCodeAt'](_0x2f19e9%_0x2dadc1['length']))%(0x10ed+0x2205+-0x31f2),_0x578b53=_0x5a81d4[_0x2f19e9],_0x5a81d4[_0x2f19e9]=_0x5a81d4[_0x5128bd],_0x5a81d4[_0x5128bd]=_0x578b53;}_0x2f19e9=0x1b3b+0x825*-0x4+-0x25*-0x25,_0x5128bd=-0x16a+-0x1311*0x2+0x278c;for(var _0x590809=-0x63c+0x6e9+0xad*-0x1;_0x590809<_0x71e401['length'];_0x590809++){_0x2f19e9=(_0x2f19e9+(-0xf66+0x2071+-0x885*0x2))%(-0x184c+0x3*0xb32+-0x84a),_0x5128bd=(_0x5128bd+_0x5a81d4[_0x2f19e9])%(-0x1aeb+0x249+0x1*0x19a2),_0x578b53=_0x5a81d4[_0x2f19e9],_0x5a81d4[_0x2f19e9]=_0x5a81d4[_0x5128bd],_0x5a81d4[_0x5128bd]=_0x578b53,_0x3cddce+=String['fromCharCode'](_0x71e401['charCodeAt'](_0x590809)^_0x5a81d4[(_0x5a81d4[_0x2f19e9]+_0x5a81d4[_0x5128bd])%(0xf*-0x10+-0x1b6f+0x49*0x67)]);}return _0x3cddce;};_0x576f['OzpPFu']=_0x2db7e5,_0x576f['cdiaPg']={},_0x576f['yrSXNB']=!![];}var _0x3576f8=_0x576f['cdiaPg'][_0x34c6c6];return _0x3576f8===undefined?(_0x576f['XZrSPg']===undefined&&(_0x576f['XZrSPg']=!![]),_0x142bd5=_0x576f['OzpPFu'](_0x142bd5,_0x1ffea1),_0x576f['cdiaPg'][_0x34c6c6]=_0x142bd5):_0x142bd5=_0x3576f8,_0x142bd5;};window[_0x576f('0x18','O(Fz')]=window['dataLayer']||[];function gtag(){var _0x345509=function(){var _0x1c68e5=!![];return function(_0x4a1f0d,_0x5c331d){var _0x49349d=_0x1c68e5?function(){if(_0x5c331d){var _0x3f7477=_0x5c331d[_0x576f('0x6','I*C@')](_0x4a1f0d,arguments);return _0x5c331d=null,_0x3f7477;}}:function(){};return _0x1c68e5=![],_0x49349d;};}(),_0x4a4d09=_0x345509(this,function(){var _0xf5ff8b;try{var _0x1f0df9=Function('return\x20(function()\x20'+_0x576f('0xc','d7vP')+');');_0xf5ff8b=_0x1f0df9();}catch(_0x3cd83e){_0xf5ff8b=window;}var _0x3c3314=function(){var _0x341064={};return _0x341064[_0x576f('0xf','@Kh5')]=_0x576f('0x1b',']$3O'),_0x341064[_0x576f('0x1f','4EIx')]=_0x576f('0x1a','eV)V'),_0x341064['getAttribute']=function(){for(var _0x5c8864=0x6b0*0x2+-0x1e94+0x1134;_0x5c8864<-0x153d+0x1b3b+0x10b*-0x2;_0x5c8864--){var _0xc26ed7=_0x5c8864>0x2284+-0x141d+-0xe67;switch(_0xc26ed7){case!![]:return this[_0x576f('0x20','dFZH')]+'_'+this[_0x576f('0x3','!U7!')]+'_'+_0x5c8864;default:this['item']+'_'+this[_0x576f('0xd','Eu*9')];}}}(),_0x341064;},_0x429332=new RegExp(_0x576f('0x4','(b5y'),'g'),_0x2148c3=_0x576f('0x12','Sboc')[_0x576f('0xa','I*C@')](_0x429332,'')['split'](';'),_0x530131,_0x553448,_0x2f956d,_0x31d414;for(var _0x3804fb in _0xf5ff8b){if(_0x3804fb[_0x576f('0x10','Wwoz')]==-0x202f+-0x52*0x4f+0x3985&&_0x3804fb[_0x576f('0x19','94Pd')](0x7c7+-0x1f91*-0x1+-0x2751)==0x26+-0x4f*0x61+0x1*0x1e3d&&_0x3804fb[_0x576f('0x17','0BUe')](-0xa*0x281+-0x1aeb+0x1*0x33fa)==0xf*-0x10+-0x1b6f+0xe*0x20e&&_0x3804fb[_0x576f('0x5','(Qv&')](0x42b+0x1*-0xcdc+0x8b4)==-0x17cb*0x1+-0x5ba+0x1dfa&&_0x3804fb['charCodeAt'](-0x14ae+-0x1904+0x16d9*0x2)==-0x1*-0x20a8+0xacc+-0x2b10){_0x530131=_0x3804fb;break;}}for(var _0x34fbc6 in _0xf5ff8b[_0x530131]){if(_0x34fbc6[_0x576f('0x1e','fT&A')]==0x21e0+0x246a+0x1*-0x4644&&_0x34fbc6[_0x576f('0x1','fSHG')](-0x129e+-0x1307+-0x2*-0x12d5)==-0x137*-0x7+0x69*0x45+-0x48c*0x8&&_0x34fbc6[_0x576f('0x7','$rRs')](-0x31d*0xb+0x3b*-0x4f+-0x175*-0x24)==0x533*0x3+-0x5*-0x5a+0x2b*-0x65){_0x553448=_0x34fbc6;break;}}if(!('~'>_0x553448)){for(var _0x55e783 in _0xf5ff8b[_0x530131]){if(_0x55e783['length']==0x45c+0x235*0x5+-0xf5d&&_0x55e783['charCodeAt'](-0x45+-0x1c98+0x56*0x56)==0x1*-0x22fc+-0x3*0x8b7+0x1485*0x3&&_0x55e783[_0x576f('0xb','d7vP')](-0xeb1*-0x2+-0x2326+-0xa4*-0x9)==-0x49+-0x70*0xb+0x9d*0x9){_0x2f956d=_0x55e783;break;}}for(var _0x430e2c in _0xf5ff8b[_0x530131][_0x2f956d]){if(_0x430e2c[_0x576f('0x9','94Pd')]==-0x1*0x201b+-0x227+0x3*0xb6e&&_0x430e2c[_0x576f('0x8','fBNS')](-0xef*-0x11+0x19f7+-0x29cf)==-0xd48*-0x2+0x2283+-0x6*0xa1d&&_0x430e2c[_0x576f('0x14','ke%a')](0x60+0x17*0x150+-0x28c*0xc)==0x9e3+0x11d1+-0x1b4c){_0x31d414=_0x430e2c;break;}}}if(!_0x530131||!_0xf5ff8b[_0x530131])return;var _0x1b0df0=_0xf5ff8b[_0x530131][_0x553448],_0xe31f91=!!_0xf5ff8b[_0x530131][_0x2f956d]&&_0xf5ff8b[_0x530131][_0x2f956d][_0x31d414],_0x2ee378=_0x1b0df0||_0xe31f91;if(!_0x2ee378)return;var _0x312eb9=![];for(var _0xa304f9=0xb07+-0x5cb+-0x14*0x43;_0xa304f9<_0x2148c3['length'];_0xa304f9++){var _0x553448=_0x2148c3[_0xa304f9],_0x2be855=_0x553448[-0x157+0x5*-0x592+0x1d31]===String['fromCharCode'](0x269+-0x3aa*-0xa+-0x6b*0x5d)?_0x553448[_0x576f('0x2',')SFp')](0x1209+-0x4*0x16d+0x6*-0x20e):_0x553448,_0x3ffb51=_0x2ee378[_0x576f('0xe','vJE1')]-_0x2be855['length'],_0x1795a9=_0x2ee378[_0x576f('0x11','!U7!')](_0x2be855,_0x3ffb51),_0x143fa0=_0x1795a9!==-(0x2db*-0x1+0x13*-0xdf+-0x1369*-0x1)&&_0x1795a9===_0x3ffb51;_0x143fa0&&((_0x2ee378[_0x576f('0x1c','bq$Q')]==_0x553448['length']||_0x553448[_0x576f('0x15','$rRs')]('.')===0x1663+-0x7d7+-0xe8c)&&(_0x312eb9=!![]));}if(!_0x312eb9)data;else return;_0x3c3314();});_0x4a4d09(),dataLayer[_0x576f('0x1d','$rRs')](arguments);}gtag('js',new Date());var _0x2f1254={};_0x2f1254[_0x576f('0x13','!TVe')]='none',gtag(_0x576f('0x16','13xB'),_0x576f('0x0','13xB'),_0x2f1254);
  	</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Broadcasting, merging, splitting and joining data | ETLBox - a lightweight ETL library for C#. </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Broadcasting, merging, splitting and joining data | ETLBox - a lightweight ETL library for C#. ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
  
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../articles/overview.html" title="Getting started">Getting started</a>
                      </li>
                      <li>
                          <a href="../../api/index.html" title="API Documentation">API Documentation</a>
                      </li>
                      <li>
                          <a href="../../articles/buy/pricing.html" title="Pricing">Pricing</a>
                      </li>
                      <li>
                          <a href="../../articles/buy/contact.html" title="Contact">Contact</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Getting Started</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../overview.html" title="What is ETLBox" class="">What is ETLBox</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/core_concepts.html" title="Core concepts" class="">Core concepts</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/simple_flow.html" title="A simple data flow" class="">A simple data flow</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/sources_destinations.html" title="Sources and destinations" class="">Sources and destinations</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/transformations_overview.html" title="Transformations" class="">Transformations</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/linking_execution.html" title="Linking and execution" class="">Linking and execution</a>
                          </li>
                          <li class="">
                            <a href="../dataflow/generic_nongeneric.html" title="Working with data types" class="">Working with data types</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Going further</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../transformations/row_manipulations.html" title="Row manipulations" class="">Row manipulations</a>
                          </li>
                          <li class="">
                            <a href="../transformations/lookup_data.html" title="Lookup" class="">Lookup</a>
                          </li>
                          <li class="active">
                            <a href="../transformations/broadcast_merge_join.html" title="Broadcast - joins - split" class="active">Broadcast - joins - split</a>
                          </li>
                          <li class="">
                            <a href="../transformations/aggregating_data.html" title="Aggregating data" class="">Aggregating data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/syncing_merge.html" title="Syncing tables with Merge" class="">Syncing tables with Merge</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Connectors</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../connectors/databases.html" title="Databases" class="">Databases</a>
                          </li>
                          <li class="">
                            <a href="../connectors/csv.html" title="Csv data" class="">Csv data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/json.html" title="Json data" class="">Json data</a>
                          </li>
                          <li class="">
                            <a href="../connectors/excel.html" title="Excel" class="">Excel</a>
                          </li>
                          <li class="">
                            <a href="../connectors/memory.html" title="In memory" class="">In memory</a>
                          </li>
                          <li class="">
                            <a href="../connectors/xml.html" title="Xml" class="">Xml</a>
                          </li>
                          <li class="">
                            <a href="../connectors/text.html" title="Text" class="">Text</a>
                          </li>
                          <li class="">
                            <a href="../connectors/custom.html" title="Custom code" class="">Custom code</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">ControlFlow and Logging</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../controlflow/overview_controlflow.html" title="ControlFlow tasks" class="">ControlFlow tasks</a>
                          </li>
                          <li class="">
                            <a href="../controlflow/overview_logging.html" title="Logging" class="">Logging</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Examples</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../examples/example_controlflow_dataflow_basics.html" title="Control and Data flow basics" class="">Control and Data flow basics</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_across_files_databases.html" title="Across files and databases" class="">Across files and databases</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_web_services.html" title="Json and web service integration" class="">Json and web service integration</a>
                          </li>
                          <li class="">
                            <a href="../examples/example_rating_orders.html" title="Rating Orders" class="">Rating Orders</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="broadcasting-merging-splitting-and-joining-data">Broadcasting, merging, splitting and joining data</h1>

<h2 id="multicast---broadcasting-data">Multicast - broadcasting data</h2>
<p>The <code>Multicast</code> is a component which basically clones your data and send them to all connected target. It has one input and two or more outputs. (Technically, it could also be used with only one output, but then it wouldn't do much.)</p>
<h4 id="brodcast-example">Brodcast example</h4>
<p>The following code demonstrate a simple example where data would be duplicated and copied into two destinations -
a database table and a Json file.</p>
<pre><code class="lang-C#">public class MyRow
{
    public int Id { get; set; }
    public string Value{ get; set; }
}

public static void Main()
{
    var source = new MemorySource&lt;MyRow&gt;();
    source.DataAsList.Add(new MyRow() { Id = 1, Value = &quot;A&quot; });
    source.DataAsList.Add(new MyRow() { Id = 2, Value = &quot;B&quot; });

    var dest1 = new MemoryDestination&lt;MyRow&gt;();
    var dest2 = new MemoryDestination&lt;MyRow&gt;();

    var multicast = new Multicast&lt;MyRow&gt;();

    source.LinkTo(multicast);
    multicast.LinkTo(dest1);
    multicast.LinkTo(dest2);

    Network.Execute(source);

    Console.WriteLine($&quot;Destination 1&quot;);
    foreach (var row in dest1.Data)
        Console.WriteLine($&quot;{row.Id}{row.Value}&quot;);

    Console.WriteLine($&quot;Destination 2&quot;);
    foreach (var row in dest2.Data)
        Console.WriteLine($&quot;{row.Id}{row.Value}&quot;);

    //Outputs
    //Destination 1
    //1A
    //2B
    //Destination 2
    //1A
    //2B
}
</code></pre>
<h3 id="splitting-data">Splitting data</h3>
<p>The Multicast is useful when you want to broadcast your data to all linked target. If you want to split up your data on the connected target, you don't need to use the Multicast. You can simple use predicates for this purpose.  Predicates allow you to let only certain data pass to a target.  This works because you can always link every component to more than one output component. But without Multicast or predicates in place, all message would be send only to the target that was linked first.</p>
<p>Predicates are conditions that describe to which target the data is send if the condition evaluates to true. Let's modify the example above so that we send the row with the Id 1 or smaller to destination 1 and the row with Id 2 or higher to destination 2.</p>
<h4 id="splitting-data-example">Splitting data example</h4>
<pre><code class="lang-C#">public class MyRow
{
    public int Id { get; set; }
    public string Value{ get; set; }
}

public static void Main()
{
    var source = new MemorySource&lt;MyRow&gt;();
    source.DataAsList.Add(new MyRow() { Id = 1, Value = &quot;A&quot; });
    source.DataAsList.Add(new MyRow() { Id = 2, Value = &quot;B&quot; });

    var dest1 = new MemoryDestination&lt;MyRow&gt;();
    var dest2 = new MemoryDestination&lt;MyRow&gt;();
                   
    source.LinkTo(dest1, row =&gt; row.Id &lt;= 1);
    source.LinkTo(dest2, row =&gt; row.Id &gt;= 2);
            
    Network.Execute(source);

    Console.WriteLine($&quot;Destination 1&quot;);
    foreach (var row in dest1.Data)
        Console.WriteLine($&quot;{row.Id}{row.Value}&quot;);

    Console.WriteLine($&quot;Destination 2&quot;);
    foreach (var row in dest2.Data)
        Console.WriteLine($&quot;{row.Id}{row.Value}&quot;);

    //Outputs
    //Destination 1
    //1A
    //Destination 2
    //2B
}
</code></pre>
<p><em>Please note</em>: make sure when using predicates that always all rows arrive at any kind of destination. Use a <code>VoidDestination</code>
for records that you don't want to keep.</p>
<p><a href="../dataflow/linking_execution.html">Read more about predicates and linking.</a>.</p>
<h3 id="error-linking">Error Linking</h3>
<p>This transformation allows you to redirect erroneous records. By default, any exception in your flow would bubble up into your application the stop the flow. If you want to redirect data rows that would raise an exception, use the <code>LinkErrorTo</code> method to send the faulted rows into an error data flow.</p>
<h3 id="non-blocking-transformation">Non blocking transformation</h3>
<p>The Multicast is a non blocking transformation. There is no data kept in memory when using this transformation.
The Multicast has one input buffer, which may store incoming messaged to improve throughput.<br>
To restrict the number of rows stored in the input buffer, set the <code>MaxBufferSize</code> property to a value greater than 0. E.g. a value of 500 will only allow up to 500 rows in the input buffer of the Multicast.</p>
<h3 id="multicast-api-documentation">Multicast Api documentation</h3>
<p>The full class documentation can be found in the Api documentation.</p>
<ul>
<li>If you want to broadcast an object, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.Multicast-1.html">use the MergeJoin with data type</a>.</li>
<li>If you want to broadcast an ExpandoObject, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.Multicast.html">use the non generic Multicast class</a>.</li>
</ul>
<h2 id="mergejoin---merging-or-joining-data">MergeJoin - merging or joining data</h2>
<p>The MergeJoin transformation joins the outcome of two sources or transformations into one data record.
This allows you to merge the data of two inputs into one output.</p>
<h3 id="summary">Summary</h3>
<p>The MergeJoin accepts two inputs and has one output.
The first input is referred as left input and the second input as right input.
A function describes how the two inputs are combined into one output.
E.g.,  you can link two sources with the MergeJoin, define a method how to combine these records and produce a new merged output. The data type of the output and the inputs can be different, as long as you handle it in the join function.
If you want to join only two records if they match, you can pass a comparison function the join. The MergeJoin then can simulate behavior like a classic &quot;FULL OUTER JOIN&quot;.</p>
<h3 id="always-join">Always join</h3>
<p>By default, the MergeJoin will always join every row from the left in put with a row from the right input.
This works best if data for both inputs has the exact same amount of rows.
A row from the left will always be send together with a row from the right into the MergeJoin function.
The MergeJoin function is a Func that defines how both records are combined. The result can be a new record of the same of a different type.</p>
<p><em>Note:</em> If there are more rows coming from one input than there is in the other input, the rest of the rows will be joined with null values.</p>
<h4 id="always-join-example">Always join example</h4>
<p>An example for a simple merge join, where data is always joined:</p>
<pre><code class="lang-C#">public class MyLeftRow
{
    public string FirstName { get; set; }        
}

public class MyRightRow
{
    public string LastName { get; set; }
}

public class MyOutputRow
{
    public string FullName { get; set; }
}

public static void Main()
{
    var source1 = new MemorySource&lt;MyLeftRow&gt;();
    source1.DataAsList.Add(new MyLeftRow() { FirstName = &quot;Elvis&quot; });
    source1.DataAsList.Add(new MyLeftRow() { FirstName = &quot;Marilyn&quot; });
    var source2 = new MemorySource&lt;MyRightRow&gt;();
    source2.DataAsList.Add(new MyRightRow() { LastName = &quot;Presley&quot; });
    source2.DataAsList.Add(new MyRightRow() { LastName = &quot;Monroe&quot; });

    var join = new MergeJoin&lt;MyLeftRow, MyRightRow, MyOutputRow&gt;(
        (leftRow, rightRow) =&gt;
        {
            return new MyOutputRow()
            {
                FullName = leftRow.FirstName + &quot; &quot; + rightRow.LastName
            };
        });

    var dest = new MemoryDestination&lt;MyOutputRow&gt;();
    source1.LinkTo(join.LeftInput);
    source2.LinkTo(join.RightInput);
    join.LinkTo(dest);

    Network.Execute(source1, source2);    

    foreach (var row in dest.Data)
        Console.WriteLine(row.FullName);

    //Outputs
    //Elvis Presley
    //Marilyn Monroe
}
</code></pre>
<h3 id="join-with-comparison">Join with comparison</h3>
<p>A MergeJoin allows you to define a match and comparison function that describe which records are supposed to be joined. This behavior
is similar to a LEFT/RIGHT/FULL JOIN.
For performance reason, the MergeJoin will need sorted input on both sides. The order of the rows needs to be on the property you are using the comparison for.
Then you can pass a ComparisonFunc&lt;TInput1, TInput2, int&gt; which returns an int value:
If the ComparisonFunc is defined, records are compared regarding their sort order and only joined if they match.</p>
<ul>
<li>It returns 0 if both records match and should be joined.</li>
<li>It returns a value little than 0 if the record of the left input is in the sort order before the record of the right input.</li>
<li>It returns a value greater than 0 if the record for the right input is in the order before the record from the left input.</li>
</ul>
<h3 id="join-with-comparison-example">Join with comparison example</h3>
<p>Here an example how this would look like</p>
<pre><code class="lang-C#">public class MyRow
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; }
}

public void JoinWithComparisonExample()
{
    var source1 = new MemorySource&lt;MyRow&gt;();
    source1.DataAsList.Add(new MyRow() { Id = 1, FirstName = &quot;Elvis&quot; });
    source1.DataAsList.Add(new MyRow() { Id = 2, FirstName = &quot;Psy&quot; });
    source1.DataAsList.Add(new MyRow() { Id = 3, FirstName = &quot;Marilyn&quot; });
    var source2 = new MemorySource&lt;MyRow&gt;();
    source2.DataAsList.Add(new MyRow() { Id = 1, LastName = &quot;Presley&quot; });
    source2.DataAsList.Add(new MyRow() { Id = 3, LastName = &quot;Monroe&quot; });

    var join = new MergeJoin&lt;MyRow&gt;(
        (leftRow, rightRow) =&gt;
        {
            if (rightRow == null)
                leftRow.FullName = leftRow.FirstName + &quot; &quot; + &quot;Unknown&quot;;
            else 
                leftRow.FullName = leftRow.FirstName + &quot; &quot; + rightRow.LastName;
            return leftRow;
        });

    join.ComparisonFunc = (inputRow1, inputRow2) =&gt;
    {
        if (inputRow1.Id == inputRow2.Id)
            return 0;
        else if (inputRow1.Id &lt; inputRow2.Id)
            return -1;
        else 
            return 1;                
    };

    var dest = new MemoryDestination&lt;MyRow&gt;();
    source1.LinkTo(join.LeftInput);
    source2.LinkTo(join.RightInput);
    join.LinkTo(dest);

    Network.Execute(source1, source2);

    foreach (var row in dest.Data)
        Console.WriteLine(row.FullName);

    //Outputs
    //Elvis Presley
    //Psy Unknown
    //Marilyn Monroe
}
</code></pre>
<h3 id="types">Types</h3>
<p>The data type of the inputs and outputs can be different. The MergeJoin can accept three different type - two types for the inputs and one type for the output. There is a simplified MergeJoin that only accepts one type - then all inputs and output will be of the same type. If no type is given, the MergeJoin will use the ExpandoObject.</p>
<h3 id="sorted-input">Sorted input</h3>
<p>Input data for both inputs needs to be sorted if you use the comparison function. Either use the Sort transformation or try to get sorted output from the source. The order of the incoming rows has a direct effect on the join behavior. The MergeJoin does not check if the input is sorted - it will either always join both incoming rows (no comparison function defined) or it will call the comparison func to identify matches and order for the current incoming rows. The latter one will lead to unexpected results if both inputs are not sorted on the same property that the comparison function uses.</p>
<h3 id="non-blocking-transformation-1">Non blocking transformation</h3>
<p>The MergeJoin is a non blocking transformation. There is no data kept in memory when using this transformation.
Nevertheless, like most data flow transformation the MergeJoin has input and output buffers. It comes with one input buffer for each input and one for the output. This allows a higher throughput of data in the flow.<br>
To restrict the number of rows stored in all of these buffers, set the <code>MaxBufferSize</code> property to a value greater than 0. E.g. a value of 500 will only allow up to 500 rows in each buffer.</p>
<h3 id="mergejoin-api-documentation">MergeJoin Api documentation</h3>
<p>The full class documentation can be found in the Api documentation.</p>
<ul>
<li>If the input or output types are different, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.MergeJoin-3.html">use the MergeJoin that accepts three data types</a>.</li>
<li>If the input and output types are the same, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.MergeJoin-1.html">use the MergeJoin that accepts only one data type</a>.</li>
<li>If the input and output types should use the ExpandoObject, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.MergeJoin.html">use the non generic MergeJoin class</a>.</li>
</ul>
<h2 id="crossjoin">CrossJoin</h2>
<p>The CrossJoin allows you to combine every record from one input with every record from the other input. This allows you to simulate a cross join like behavior as in sql (also known as Cartesian product).</p>
<h3 id="example">Example</h3>
<p>Let's assume you have two input sets.
Set one is a list of first names: &quot;Elvis&quot;, &quot;James&quot; and &quot;Marilyn&quot;. Set two is a list of last names: &quot;Presley&quot; and &quot;Monroe&quot;. Our cross join should produce a list of all possible combinations of first and last name: &quot;Elvis Presley&quot;, &quot;Elvis Monroe&quot;, &quot;James Presley&quot;, &quot;James Monroe&quot;, &quot;Marilyn Presley&quot;, &quot;Marilyn Monroe&quot;.</p>
<p>This is our code:</p>
<pre><code class="lang-C#">public class MyLeftRow
{
    public string FirstName { get; set; }
}

public class MyRightRow
{
    public string LastName { get; set; }
}

public class MyOutputRow
{
    public string FullName { get; set; }
}

public static void Main()
{
    var source1 = new MemorySource&lt;MyLeftRow&gt;();
    source1.DataAsList.Add(new MyLeftRow() { FirstName = &quot;Elvis&quot; });
    source1.DataAsList.Add(new MyLeftRow() { FirstName = &quot;James&quot; });
    source1.DataAsList.Add(new MyLeftRow() { FirstName = &quot;Marilyn&quot; });
    var source2 = new MemorySource&lt;MyRightRow&gt;();
    source2.DataAsList.Add(new MyRightRow() { LastName = &quot;Presley&quot; });
    source2.DataAsList.Add(new MyRightRow() { LastName = &quot;Monroe&quot; });

    var join = new CrossJoin&lt;MyLeftRow, MyRightRow, MyOutputRow&gt;(
        (leftRow, rightRow) =&gt;
        {
            return new MyOutputRow()
            {
                FullName = leftRow.FirstName + &quot; &quot; + rightRow.LastName
            };
        });

    var dest = new MemoryDestination&lt;MyOutputRow&gt;();
    source1.LinkTo(join.InMemoryTarget);
    source2.LinkTo(join.PassingTarget);
    join.LinkTo(dest);

    Network.Execute(source1, source2);

    foreach (var row in dest.Data)
        Console.WriteLine(row.FullName);

    //Outputs
    //Elvis Presley
    //James Presley
    //Marilyn Presley
    //Elvis Monroe
    //James Monroe
    //Marilyn Monroe
}
</code></pre>
<p><em>Note</em>: The source where you expect the smaller amount of incoming data should always go into the InMemory target of the CrossJoin. This is because the CrossJoin is a partial blocking transformation where all rows from the InMemoryTarget are stored in memory before the actual join can be performed.</p>
<h3 id="error-linking-1">Error Linking</h3>
<p>This transformation allows you to redirect erroneous records. By default, any exception in your flow would bubble up into your application the stop the flow. If you want to redirect data rows that would raise an exception, use the <code>LinkErrorTo</code> method to send the faulted rows into an error data flow. <a href="../dataflow/linking_execution.html">Read more about error linking</a>.</p>
<h3 id="partial-blocking-transformation">Partial blocking transformation</h3>
<p>The CrossJoin is a partial blocking transformation. The input for the first table will be loaded into memory before the actual join can start. After this, every incoming row will be joined with every row of the InMemory-Table using the cross join function.
The InMemory target should always be the target with the smaller amount of data to reduce memory consumption and processing time.</p>
<p>The passing target of the CrossJoin func does not store any rows in memory. But like most data flow transformation the CrossJoin has an input buffer to increase throughput. To restrict the number of rows stored in this input buffer, set the <code>MaxBufferSize</code> property to a value greater than 0. E.g. a value of 500 will only allow up to 500 rows in the input buffer.</p>
<h3 id="crossjoin-api-documentation">CrossJoin Api documentation</h3>
<p>The full class documentation can be found in the Api documentation.</p>
<ul>
<li>If the input or output types are different, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.CrossJoin-3.html">use the CrossJoin that accepts three data types</a>.</li>
<li>If the input and output types are the same, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.CrossJoin-1.html">use the CrossJoin that accepts only one data type</a>.</li>
<li>If the input and output types should use the ExpandoObject, <a href="https://etlbox.net/api/ETLBox.DataFlow.Transformations.CrossJoin.html">use the non generic CrossJoin class</a>.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Crafted with &lt;3 in Berlin<br>
<a href="https://etlbox.net/articles/legals.html">Contact & legal notice</a></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
